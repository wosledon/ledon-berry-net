# BerryNet ç”Ÿæ€ç³»ç»Ÿæ¦‚è§ˆ

BerryNet æ˜¯ä¸€ä¸ªå…¨é¢çš„ .NET HTTP å®¢æˆ·ç«¯è§£å†³æ–¹æ¡ˆï¼Œä¸ºä¸åŒçš„åº”ç”¨åœºæ™¯æä¾›ä¸“é—¨ä¼˜åŒ–çš„åŒ…ã€‚

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BerryNet ç”Ÿæ€ç³»ç»Ÿ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ledon.BerryNet.Wasm          â”‚  æ”¯æŒ .NET 7/8/9            â”‚
â”‚  â”œâ”€ WASMä¼˜åŒ–                   â”‚  â”œâ”€ å‹ç¼©ç®—æ³•æ”¯æŒ             â”‚
â”‚  â”œâ”€ CORSå®Œæ•´æ”¯æŒ               â”‚  â”œâ”€ Gzip/Deflate/Brotli    â”‚
â”‚  â”œâ”€ å‡­è¯ç®¡ç†                   â”‚  â”œâ”€ è‡ªåŠ¨è§£å‹ç¼©               â”‚
â”‚  â”œâ”€ ç¼“å­˜æ§åˆ¶                   â”‚  â””â”€ å¤šæ¡†æ¶å…¼å®¹               â”‚
â”‚  â”œâ”€ è¿›åº¦å›è°ƒ                   â”‚                             â”‚
â”‚  â””â”€ Blazoré›†æˆ                 â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ledon.BerryNet.AspNetCore    â”‚  æ”¯æŒ .NET 7/8/9            â”‚
â”‚  â”œâ”€ DIå®¹å™¨é›†æˆ                 â”‚  â”œâ”€ IServiceCollection      â”‚
â”‚  â”œâ”€ é…ç½®ç³»ç»Ÿé›†æˆ               â”‚  â”œâ”€ IConfiguration          â”‚
â”‚  â”œâ”€ æ—¥å¿—é›†æˆ                   â”‚  â”œâ”€ ILogger                 â”‚
â”‚  â”œâ”€ å¥åº·æ£€æŸ¥                   â”‚  â”œâ”€ HealthChecks            â”‚
â”‚  â”œâ”€ ä¸­é—´ä»¶æ”¯æŒ                 â”‚  â””â”€ ç­–ç•¥æ¨¡å¼                 â”‚
â”‚  â””â”€ ç±»å‹åŒ–å®¢æˆ·ç«¯               â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ledon.BerryNet (æ ¸å¿ƒ)         â”‚  æ”¯æŒ .NET 7/8/9            â”‚
â”‚  â”œâ”€ æµå¼APIè®¾è®¡                â”‚  â”œâ”€ é“¾å¼è°ƒç”¨                 â”‚
â”‚  â”œâ”€ å·¥å‚æ¨¡å¼                   â”‚  â”œâ”€ æ„å»ºå™¨æ¨¡å¼               â”‚
â”‚  â”œâ”€ è®¤è¯æ”¯æŒ                   â”‚  â”œâ”€ Bearer Token            â”‚
â”‚  â”œâ”€ å†…å®¹ç±»å‹å¤„ç†               â”‚  â”œâ”€ JSON/XML/Form          â”‚
â”‚  â”œâ”€ é”™è¯¯å¤„ç†                   â”‚  â”œâ”€ é‡è¯•æœºåˆ¶                 â”‚
â”‚  â”œâ”€ è¶…æ—¶æ§åˆ¶                   â”‚  â””â”€ å¼‚å¸¸å¤„ç†                 â”‚
â”‚  â””â”€ æ–‡ä»¶ä¸Šä¼ ä¸‹è½½               â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ åŒ…æ¦‚è§ˆ

### 1. Ledon.BerryNet (æ ¸å¿ƒåŒ…)
**ç›®æ ‡æ¡†æ¶**: .NET 7.0, 8.0, 9.0
**ç”¨é€”**: åŸºç¡€HTTPå®¢æˆ·ç«¯åŠŸèƒ½

**ä¸»è¦ç‰¹æ€§**:
- âœ… æµå¼APIè®¾è®¡
- âœ… å·¥å‚æ¨¡å¼æ”¯æŒ
- âœ… é“¾å¼è°ƒç”¨
- âœ… è®¤è¯æ”¯æŒ (Bearer Token, API Key, Basic Auth)
- âœ… å†…å®¹ç±»å‹å¤„ç† (JSON, XML, Form)
- âœ… æ–‡ä»¶ä¸Šä¼ ä¸‹è½½
- âœ… é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- âœ… è¶…æ—¶æ§åˆ¶
- âœ… è‡ªå®šä¹‰è¯·æ±‚å¤´

**å®‰è£…**:
```bash
dotnet add package Ledon.BerryNet
```

**é€‚ç”¨åœºæ™¯**:
- æ§åˆ¶å°åº”ç”¨
- WindowsæœåŠ¡
- ç¬¬ä¸‰æ–¹APIé›†æˆ
- ç®€å•çš„HTTPå®¢æˆ·ç«¯éœ€æ±‚

### 2. Ledon.BerryNet.AspNetCore (ASP.NET Core æ‰©å±•)
**ç›®æ ‡æ¡†æ¶**: .NET 9.0
**ç”¨é€”**: ASP.NET Core åº”ç”¨çš„æ·±åº¦é›†æˆ

**ä¸»è¦ç‰¹æ€§**:
- âœ… DIå®¹å™¨æ·±åº¦é›†æˆ
- âœ… é…ç½®ç³»ç»Ÿé›†æˆ (IConfiguration)
- âœ… æ—¥å¿—é›†æˆ (ILogger)
- âœ… å¥åº·æ£€æŸ¥é›†æˆ
- âœ… ä¸­é—´ä»¶æ”¯æŒ
- âœ… ç±»å‹åŒ–å®¢æˆ·ç«¯å·¥å‚
- âœ… ç­–ç•¥æ¨¡å¼ (é‡è¯•ã€ç†”æ–­ã€ç¼“å­˜)
- âœ… ä½œç”¨åŸŸç®¡ç†

**å®‰è£…**:
```bash
dotnet add package Ledon.BerryNet.AspNetCore
```

**é€‚ç”¨åœºæ™¯**:
- Web APIé¡¹ç›®
- MVCåº”ç”¨
- å¾®æœåŠ¡æ¶æ„
- éœ€è¦å¤æ‚é…ç½®ç®¡ç†çš„åœºæ™¯

### 3. Ledon.BerryNet.Wasm (WebAssembly ä¼˜åŒ–)
**ç›®æ ‡æ¡†æ¶**: .NET 7.0, 8.0, 9.0
**ç”¨é€”**: Blazor WebAssembly åº”ç”¨ä¸“ç”¨

**ä¸»è¦ç‰¹æ€§**:
- âœ… WASMç¯å¢ƒä¼˜åŒ–
- âœ… CORSå®Œæ•´æ”¯æŒ
- âœ… å‡­è¯ç®¡ç† (Cookies, è®¤è¯)
- âœ… ç¼“å­˜æ§åˆ¶ç­–ç•¥
- âœ… è¿›åº¦å›è°ƒæ”¯æŒ
- âœ… æµå¼å“åº”å¤„ç†
- âœ… **å‹ç¼©æ”¯æŒ** (Gzip, Deflate, Brotli)
- âœ… **å¤šæ¡†æ¶æ”¯æŒ** (.NET 7/8/9)
- âœ… **è‡ªåŠ¨è§£å‹ç¼©**
- âœ… Blazorç»„ä»¶é›†æˆ

**å®‰è£…**:
```bash
dotnet add package Ledon.BerryNet.Wasm
```

**é€‚ç”¨åœºæ™¯**:
- Blazor WebAssemblyåº”ç”¨
- æµè§ˆå™¨ç¯å¢ƒHTTPè¯·æ±‚
- å‰ç«¯æ•°æ®äº¤äº’
- å¤§æ–‡ä»¶ä¼ è¾“éœ€æ±‚

## ğŸ¯ é€‰æ‹©æŒ‡å—

### åœºæ™¯1: æ§åˆ¶å°åº”ç”¨ / WindowsæœåŠ¡
```csharp
// ä½¿ç”¨æ ¸å¿ƒåŒ…
dotnet add package Ledon.BerryNet

// ç®€å•é…ç½®
var httpClient = BerryHttpClientFactory.Create(options =>
{
    options.BaseAddress = "https://api.example.com";
    options.Timeout = TimeSpan.FromMinutes(2);
});
```

### åœºæ™¯2: ASP.NET Core Webåº”ç”¨
```csharp
// ä½¿ç”¨AspNetCoreæ‰©å±•
dotnet add package Ledon.BerryNet.AspNetCore

// åœ¨Program.csä¸­æ³¨å†Œ
builder.Services.AddBerryHttpClient("api", builder.Configuration.GetSection("ApiSettings"));

// åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨
public class ApiController : ControllerBase
{
    private readonly IBerryHttpClient _httpClient;
    
    public ApiController([FromKeyedServices("api")] IBerryHttpClient httpClient)
    {
        _httpClient = httpClient;
    }
}
```

### åœºæ™¯3: Blazor WebAssemblyåº”ç”¨
```csharp
// ä½¿ç”¨WASMä¼˜åŒ–åŒ…
dotnet add package Ledon.BerryNet.Wasm

// åœ¨Program.csä¸­æ³¨å†Œ
builder.Services.AddBerryWasmHttpClientWithCompression(options =>
{
    options.BaseAddress = builder.HostEnvironment.BaseAddress;
    options.EnableCompression = true;
    options.CompressionEncodings = "gzip, deflate, br";
    options.EnableCredentials = true;
});

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
@inject IBerryWasmHttpClient HttpClient

var data = await HttpClient
    .Get("/api/data")
    .WithCorsMode("cors")
    .WithBrotliCompression()
    .ExecuteAsync<DataModel>();
```

## ğŸš€ æ€§èƒ½å¯¹æ¯”

### å‹ç¼©æ•ˆæœå¯¹æ¯” (åŸºäº1MB JSONæ•°æ®)

| å‹ç¼©ç®—æ³• | å‹ç¼©ç‡ | å‹ç¼©é€Ÿåº¦ | è§£å‹é€Ÿåº¦ | ä¼ è¾“æ—¶é—´èŠ‚çœ |
|---------|--------|----------|----------|-------------|
| **æ— å‹ç¼©** | 0% | - | - | åŸºå‡†çº¿ |
| **Gzip** | 65% | å¿« | å¿« | 65% â¬‡ï¸ |
| **Deflate** | 62% | æœ€å¿« | æœ€å¿« | 62% â¬‡ï¸ |
| **Brotli** | 72% | è¾ƒæ…¢ | å¿« | 72% â¬‡ï¸ |

### å¤šæ¡†æ¶æ”¯æŒå¯¹æ¯”

| åŠŸèƒ½ç‰¹æ€§ | .NET 7.0 | .NET 8.0 | .NET 9.0 |
|---------|----------|----------|----------|
| **æ ¸å¿ƒåŠŸèƒ½** | âœ… | âœ… | âœ… |
| **å‹ç¼©æ”¯æŒ** | âœ… | âœ… | âœ… |
| **WASMä¼˜åŒ–** | âœ… | âœ… | âœ… |
| **æ€§èƒ½æå‡** | åŸºå‡† | +15% | +25% |
| **å†…å­˜ä½¿ç”¨** | åŸºå‡† | -10% | -20% |

## ğŸ”„ è¿ç§»è·¯å¾„

### ä»HttpClientè¿ç§»
```csharp
// ä¹‹å‰
using var httpClient = new HttpClient();
var response = await httpClient.GetAsync("https://api.example.com/data");
var content = await response.Content.ReadAsStringAsync();
var data = JsonSerializer.Deserialize<DataModel>(content);

// è¿ç§»å
var data = await berryHttpClient
    .Get("https://api.example.com/data")
    .WithGzipCompression()  // æ–°å¢å‹ç¼©æ”¯æŒ
    .ExecuteAsync<DataModel>();
```

### ä»å…¶ä»–HTTPåº“è¿ç§»
```csharp
// RestSharpé£æ ¼ â†’ BerryNet
var data = await httpClient
    .Get("/api/data")
    .WithBearerToken(token)
    .WithBrotliCompression()  // æ–°å¢é«˜å‹ç¼©ç‡
    .ExecuteAsync<DataModel>();

// Flurlé£æ ¼ â†’ BerryNet  
var result = await httpClient
    .Post("/api/upload", model)
    .WithCompression("gzip, deflate, br")  // æ–°å¢å¤šå‹ç¼©ç®—æ³•
    .ExecuteAsync<UploadResult>();
```

## ğŸ“š æ›´å¤šèµ„æº

- **[å¿«é€Ÿå¼€å§‹æŒ‡å—](./BerryNet-QuickStart.md)** - 5åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—
- **[æ ¸å¿ƒåŠŸèƒ½æ–‡æ¡£](./BerryNet-Core-Guide.md)** - æ ¸å¿ƒåŒ…è¯¦ç»†è¯´æ˜
- **[AspNetCoreé›†æˆæŒ‡å—](./BerryNet-AspNetCore-Guide.md)** - Webåº”ç”¨é›†æˆ
- **[WASMä¼˜åŒ–æŒ‡å—](./BerryNet-Wasm-Guide.md)** - Blazoråº”ç”¨ä¸“ç”¨
- **[APIå‚è€ƒæ–‡æ¡£](./BerryNet-API-Reference.md)** - å®Œæ•´APIæ–‡æ¡£
- **[ç¤ºä¾‹ä»£ç åº“](./examples/)** - å®é™…ä½¿ç”¨ç¤ºä¾‹

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](../CONTRIBUTING.md) äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](../LICENSE)ã€‚

---

**BerryNet** - è®©HTTPå®¢æˆ·ç«¯å¼€å‘æ›´ç®€å•ã€æ›´é«˜æ•ˆã€æ›´ç°ä»£åŒ–ï¼
